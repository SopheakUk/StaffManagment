@using StaffManagement.Service.Interface
@using StaffManagementCore.Model
@inherits AddStaff
@inject IStaffService _staffService

@{
	base.BuildRenderTree(__builder);
}

@code {

	[Parameter]
	public override StaffModel Model { get; set; }

	protected override string ConfirmText => "Update";

	protected override Mode FormMode => Mode.EditMode;

	protected override async void Confirm()
	{
		if (Busy()) return;

		try
		{
			await _form.Validate();
			if (_success == false) return;
			var response = await _staffService.Put(Model);
			MudDialog.Close(DialogResult.Ok(true));
			Success(response.ResponseMessage);
		}
		catch (Exception ex)
		{
			Error(ex);
		}
		finally
		{
			Free();
		}
	}
}
